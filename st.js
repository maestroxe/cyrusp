if(function(e,t){"use strict";var i="addEventListener",n="getElementsByClassName",o="createElement",d="classList",a="appendChild",s="dataset",l="embed-lightbox-iframe",r="embed-lightbox-is-loaded",m="embed-lightbox-is-opened",c="embed-lightbox-is-showing",h=function(e,i,o){var d=o||{};this.trigger=e,this.elemRef=i,this.rate=d.rate||500,this.el=t[n](l)[0]||"",this.body=this.el?this.el[n]("embed-lightbox-body")[0]:"",this.content=this.el?this.el[n]("embed-lightbox-content")[0]:"",this.href=e[s].src||"",this.paddingBottom=e[s].paddingBottom||"",this.onOpened=d.onOpened,this.onIframeLoaded=d.onIframeLoaded,this.onLoaded=d.onLoaded,this.onCreated=d.onCreated,this.init()};h.prototype.init=function(){var e=this;this.el||this.create();var t,n,o,d,a,s,l=(t=function(t){t.preventDefault(),e.open()},n=this.rate,function(){a=this,d=[].slice.call(arguments,0),s=new Date;var e=function(){var i=new Date-s;i<n?o=setTimeout(e,n-i):(o=null,t.apply(a,d))};o||(o=setTimeout(e,n))});this.trigger[i]("click",l)},h.prototype.create=function(){var e=this,n=t[o]("div");this.el=t[o]("div"),this.content=t[o]("div"),this.body=t[o]("div"),this.el[d].add(l),n[d].add("embed-lightbox-backdrop"),this.content[d].add("embed-lightbox-content"),this.body[d].add("embed-lightbox-body"),this.el[a](n),this.content[a](this.body),this.contentHolder=t[o]("div"),this.contentHolder[d].add("embed-lightbox-content-holder"),this.contentHolder[a](this.content),this.el[a](this.contentHolder),t.body[a](this.el),n[i]("click",function(){e.close()});var s=function(){e.isOpen()||(e.el[d].remove(c),e.body.innerHTML="")};this.el[i]("transitionend",s,!1),this.el[i]("webkitTransitionEnd",s,!1),this.el[i]("mozTransitionEnd",s,!1),this.el[i]("msTransitionEnd",s,!1),this.callCallback(this.onCreated,this)},h.prototype.loadIframe=function(){var e,i,n=this;this.iframeId=l+"-"+this.elemRef,this.body.innerHTML='<iframe src="'+this.href+'" name="'+this.iframeId+'" id="'+this.iframeId+'" onload="this.style.opacity=1;" style="opacity:0;border:none;" scrolling="no" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen="true" height="166" frameborder="no"></iframe>',e=this.iframeId,i=this.body,t.getElementById(e).onload=function(){this.style.opacity=1,i[d].add(r),n.callCallback(n.onIframeLoaded,n),n.callCallback(n.onLoaded,n)}},h.prototype.open=function(){this.loadIframe(),this.paddingBottom?this.content.style.paddingBottom=this.paddingBottom:this.content.removeAttribute("style"),this.el[d].add(c),this.el[d].add(m),this.callCallback(this.onOpened,this)},h.prototype.close=function(){this.el[d].remove(m),this.body[d].remove(r)},h.prototype.isOpen=function(){return this.el[d].contains(m)},h.prototype.callCallback=function(e,t){"function"==typeof e&&e.bind(this)(t)},e.EmbedSocialIframeLightbox=h}("undefined"!=typeof window?window:this,document),!document.getElementById("EmbedSocialIFrame")){var jsEmbed=document.createElement("script");jsEmbed.id="EmbedSocialIFrame",jsEmbed.src="https://embedsocial.com/cdn/iframe.js",document.getElementsByTagName("body")[0].appendChild(jsEmbed)}if(!document.getElementById("EmbedSocialIFrameLightboxCSS")){var cssEmbed=document.createElement("link");cssEmbed.id="EmbedSocialIFrameLightboxCSS",cssEmbed.rel="stylesheet",cssEmbed.href="https://raw.githubusercontent.com/maestroxe/cyrusp/master/iframe-lightbox.min.css",document.getElementsByTagName("head")[0].appendChild(cssEmbed)}if(EMBEDSOCIALSTORIES={getEmbedData:function(e,t){if(t.getElementsByTagName("iframe").length<=0){var i=document.createElement("iframe"),n="https://embedsocial.com/api/pro_story_widget/"+e;i.setAttribute("src",n),i.setAttribute("class","embedsocial-iframe-story"),i.setAttribute("id","embedIFrame_"+e+Math.random().toString(36).substring(7)),i.style.width="100%",i.style.height="100%",i.style.border="0",i.setAttribute("scrolling","no"),t.appendChild(i),EMBEDSOCIALSTORIES.initResizeFrame(e)}},initResizeFrame:function(e){document.getElementById("EmbedSocialIFrame")&&"function"==typeof iFrameResize?(iFrameResize({messageCallback:function(e){"create"==e.message.action&&EMBEDSOCIALSTORIES.createLightBox(e.message)}},".embedsocial-iframe-story"),iFrameResize({messageCallback:function(e){EMBEDSOCIALSTORIES.closeLightBox(e.message.widgetRef)},sizeHeight:!1,sizeWidth:!1},"#embed-lightbox-iframe-"+e)):setTimeout(function(){EMBEDSOCIALSTORIES.initResizeFrame(e)},200)},createLightBox:function(e){var t="https://embedsocial.com/api/pro_story_lightbox/"+e.widgetRef;if(e.activeIndex&&(t=t+"?activeIndex="+e.activeIndex),document.getElementById("embed-lightbox-"+e.widgetRef))(i=document.getElementById("embed-lightbox-"+e.widgetRef)).setAttribute("data-src",t),i.innerHTML="";else{var i=document.createElement("a");i.setAttribute("class","embedsocail-iframe-lightbox-link"),i.setAttribute("id","embed-lightbox-"+e.widgetRef),i.setAttribute("data-padding-bottom","56%"),i.setAttribute("data-src",t),document.body.appendChild(i)}[].forEach.call(document.getElementsByClassName("embedsocail-iframe-lightbox-link"),function(t){t.lightbox=new EmbedSocialIframeLightbox(t,e.widgetRef,{onLoaded:function(t){function i(){var t=document.getElementById("embed-lightbox-iframe-"+e.widgetRef);if(t&&"object"==typeof t){var n=window.innerHeight||document.documentElement.clientHeight;n>1800&&(n=1800),t.style.height=parseInt(.95*n)+"px"}else setTimeout(i,200)}EMBEDSOCIALSTORIES.initResizeFrame(e.widgetRef),i(),window.addEventListener("resize",i)}})}),EMBEDSOCIALSTORIES.openLightBox(e.widgetRef)},openLightBox:function(e){document.getElementById("embed-lightbox-"+e).click(),document.getElementsByClassName("embed-lightbox-body")[0].addEventListener("click",function(t){(t.target||t.srcElement).classList.contains("embed-lightbox-is-loaded")&&EMBEDSOCIALSTORIES.closeLightBox(e)}),window.addEventListener("keydown",function(t){t=window.event?window.event:t;if(document.getElementById("embed-lightbox-iframe-"+e)){[37,39,27].indexOf(t.keyCode)>-1&&EMBEDSOCIALSTORIES.navigationLightBox(e,t.keyCode)}},!0)},closeLightBox:function(e){document.getElementsByClassName("embed-lightbox-backdrop")[0].click()},navigationLightBox:function(e,t){document.getElementById("embed-lightbox-iframe-"+e).iFrameResizer.sendMessage({navigationCode:t})}},"IntersectionObserver"in window)function callVisible(e,t){for(i in e)e[i].isIntersecting&&EMBEDSOCIALSTORIES.getEmbedData(e[i].target.getAttribute("data-ref"),e[i].target)}function standardLoad(e){for(i=0;i<e.length;i++){var t=e[i],n=t.getAttribute("data-ref");"yes"===t.getAttribute("data-lazyload")&&"IntersectionObserver"in window?new IntersectionObserver(callVisible,{}).observe(t):EMBEDSOCIALSTORIES.getEmbedData(n,t)}}var er=document.getElementsByClassName("embedsocial-stories");er.length>0?standardLoad(er):window.addEventListener("load",function(){standardLoad(document.getElementsByClassName("embedsocial-stories"))});
